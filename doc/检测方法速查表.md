è†é›ªç»™è¿™ä¸ªä»“åº“æ€»ç»“ç”Ÿæˆçš„æ–‡æ¡£å–µ~# è®¾å¤‡æ£€æµ‹æ–¹æ³•é€ŸæŸ¥è¡¨

## ğŸ¯ å¿«é€Ÿç´¢å¼•

```
è®¾å¤‡æ£€æµ‹ä½“ç³»
â”‚
â”œâ”€ åŸºç¡€æ£€æµ‹å±‚ (JavaScript API + CSS)
â”‚  â”œâ”€ è¾“å…¥è®¾å¤‡æ£€æµ‹ (+2åˆ†)
â”‚  â”œâ”€ Appleç”Ÿæ€æ£€æµ‹ (+2~6åˆ†)
â”‚  â”œâ”€ Androidç‰¹å¾æ£€æµ‹ (+3~4åˆ†)
â”‚  â”œâ”€ æ¡Œé¢ç³»ç»Ÿæ£€æµ‹ (+1~4åˆ†)
â”‚  â”œâ”€ å±å¹•å°ºå¯¸åˆ†æµ (+5åˆ†)
â”‚  â””â”€ WebGLæŒ‡çº¹ (+4~6åˆ†)
â”‚
â”œâ”€ é«˜çº§æ£€æµ‹å±‚ (æœåŠ¡å™¨åä½œ + ç¡¬ä»¶)
â”‚  â”œâ”€ Client Hints (+3~5åˆ†)
â”‚  â””â”€ PASSKEYæ£€æµ‹ (+8åˆ†) â­æœ€é«˜æƒé‡
â”‚
â””â”€ è£å†³å±‚
   â””â”€ UAäºŒæ¬¡åˆ¤å®š (å¹³åˆ†æ—¶ä»‹å…¥)
```

---

## ğŸ“‹ æ£€æµ‹æ–¹æ³•æ¸…å•

### ğŸ”µ åŸºç¡€æ£€æµ‹ï¼ˆ18ç§æ–¹æ³•ï¼‰

#### è¾“å…¥è®¾å¤‡ (2ç§)
- [ ] `navigator.maxTouchPoints` - è§¦æ§ç‚¹æ•°é‡
- [ ] `matchMedia('(pointer:coarse)')` - æŒ‡é’ˆç±»å‹

#### Appleç”Ÿæ€ (5ç§)
- [ ] `CSS.supports('-webkit-touch-callout')` - iOS/iPadOS CSSç‰¹æ€§ **+5åˆ†**
- [ ] `'ApplePaySession' in window` - Apple Pay **+4åˆ†**
- [ ] `window.safari.pushNotification` - macOS Safari **+4åˆ†**
- [ ] `DeviceMotionEvent.requestPermission` - iOSæƒé™API **+6åˆ†**
- [ ] `navigator.standalone` - iOS PWA **+2åˆ†**

#### Androidç‰¹å¾ (2ç§)
- [ ] `'NDEFReader' in window` - Web NFC **+4åˆ†**
- [ ] `'getInstalledRelatedApps' in navigator` - å…³è”åº”ç”¨ **+3åˆ†**

#### æ¡Œé¢ç³»ç»Ÿ (3ç§)
- [ ] `'serial' in navigator` - Web Serial **+4åˆ†**
- [ ] `'hid' in navigator` - Web HID **+2åˆ†**
- [ ] `'usb' in navigator` - Web USB **+1åˆ†**

#### å±å¹•ç‰¹å¾ (1ç§)
- [ ] `screen.width/height + devicePixelRatio` - å°ºå¯¸åˆ†æµ **+5åˆ†**

#### WebGLæŒ‡çº¹ (5ç§)
- [ ] `UNMASKED_VENDOR_WEBGL` å« "apple" â†’ macOS/iOS **+6åˆ†**
- [ ] `UNMASKED_RENDERER_WEBGL` å« "direct3d" â†’ Windows **+6åˆ†**
- [ ] å« "mesa"/"llvmpipe" â†’ Linux **+5åˆ†**
- [ ] å« "adreno"/"mali" â†’ Android **+4åˆ†**
- [ ] å« "angle"+"metal" â†’ macOS **+4åˆ†**

---

### ğŸŸ¢ é«˜çº§æ£€æµ‹ï¼ˆ2ç§ï¼‰

#### Client Hints
```javascript
// ä½ç†µå€¼ï¼ˆæ— éœ€æƒé™ï¼‰
navigator.userAgentData.mobile
navigator.userAgentData.platform

// é«˜ç†µå€¼ï¼ˆéœ€è¯·æ±‚ï¼‰
await navigator.userAgentData.getHighEntropyValues([
  'platformVersion',
  'architecture',
  'model'
])
```
**æƒé‡ï¼š** å®Œæ•´é…ç½® +5åˆ† | ä»…API +3åˆ†

#### PASSKEY (WebAuthn) â­
```javascript
// æ£€æŸ¥å¹³å°è®¤è¯å™¨
await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()

// åˆ›å»ºå‡­æ®è·å–ä¼ è¾“æ–¹å¼
const credential = await navigator.credentials.create({...})
const transports = credential.response.getTransports()
```
**æƒé‡ï¼š+8åˆ†**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

**ä¼ è¾“æ–¹å¼æ¨æ–­ï¼š**
- `internal` â†’ Touch ID/Face ID/Windows Hello
- `hybrid` â†’ Android/Windows æ··åˆè®¤è¯
- `usb` â†’ æ¡Œé¢ç³»ç»Ÿ USBå¯†é’¥
- `nfc`/`ble` â†’ ç§»åŠ¨è®¾å¤‡

---

## ğŸ¯ ç³»ç»Ÿç‰¹å¾é€ŸæŸ¥

### iOS/iPadOS
```
âœ… -webkit-touch-callout (+5)
âœ… ApplePaySession (+4)
âœ… DeviceMotionEvent.requestPermission (+6)
âœ… navigator.standalone (+2)
âœ… WebGL vendor: "apple" (+6)
âœ… å±å¹•çŸ­è¾¹ <600px â†’ iOS, â‰¥600px â†’ iPadOS (+5)
```

### macOS
```
âœ… ApplePaySession (+4)
âœ… window.safari.pushNotification (+4)
âœ… WebGL: "apple" / "angle+metal" (+6/+4)
âœ… Web Serial/HID (+4/+2)
```

### Android
```
âœ… NDEFReader (Web NFC) (+4)
âœ… getInstalledRelatedApps (+3)
âœ… WebGL: "adreno"/"mali" (+4)
âœ… maxTouchPoints > 0 (+2)
```

### Windows
```
âœ… WebGL: "direct3d"/"d3d" (+6)
âœ… Web Serial/HID/USB (+4/+2/+1)
âœ… PASSKEY: Windows Hello
```

### Linux
```
âœ… WebGL: "mesa"/"llvmpipe"/"x11"/"wayland" (+5/+4)
âœ… Web Serial/HID (+4/+2)
```

---

## ğŸ”¢ ç½®ä¿¡åº¦è®¡ç®—

| æ¡ä»¶ | ç½®ä¿¡åº¦ |
|------|--------|
| åˆ†æ•°â‰¥15 ä¸” å·®è·â‰¥8 | 98% |
| åˆ†æ•°â‰¥12 ä¸” å·®è·â‰¥6 | 95% |
| åˆ†æ•°â‰¥10 ä¸” å·®è·â‰¥5 | 92% |
| åˆ†æ•°â‰¥8 ä¸” å·®è·â‰¥4 | 88% |
| åˆ†æ•°â‰¥6 ä¸” å·®è·â‰¥3 | 82% |
| åˆ†æ•°â‰¥5 ä¸” å·®è·â‰¥2 | 75% |
| å·®è·â‰¥2 | 68% |
| å·®è·â‰¥1 | 58% |
| å·®è·<1 | 45% |

**é«˜çº§æ£€æµ‹ç½®ä¿¡åº¦ï¼š**
- PASSKEY + Client Hints ä¸€è‡´ï¼š**95%**
- ä»…PASSKEYï¼š**90%**
- ä»…Client Hintsï¼š**75%**
- æ£€æµ‹å†²çªï¼ˆç¯¡æ”¹ï¼‰ï¼š**25%**

---

## ğŸ› ï¸ å®ç°ä»£ç ç‰‡æ®µ

### åŸºç¡€æ£€æµ‹æ¡†æ¶
```javascript
const scores = { android:0, ios:0, ipados:0, macos:0, windows:0, linux:0 };

const vote = (targets, weight, title, detail, ok=true) => {
  if (ok) {
    targets.forEach(t => scores[t] += weight);
  }
  addStep({ ok, title, detail, weight, targets });
};

// ç¤ºä¾‹ï¼šæ£€æµ‹Apple Pay
if ('ApplePaySession' in window) {
  vote(['ios','ipados','macos'], 4, 'Apple Pay API', 'Safariç³»åˆ—å¯ç”¨');
}
```

### WebGLæŒ‡çº¹æå–
```javascript
function getWebGLInfo() {
  const canvas = document.createElement('canvas');
  const gl = canvas.getContext('webgl');
  const dbg = gl.getExtension('WEBGL_debug_renderer_info');
  
  return {
    vendor: gl.getParameter(dbg.UNMASKED_VENDOR_WEBGL),
    renderer: gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL)
  };
}
```

### PASSKEYæ£€æµ‹
```javascript
async function detectPasskey() {
  if (!window.PublicKeyCredential) return null;
  
  const available = await PublicKeyCredential
    .isUserVerifyingPlatformAuthenticatorAvailable();
  
  if (!available) return null;
  
  // åŸºäºUAå’Œå¹³å°è®¤è¯å™¨æ¨æ–­
  const ua = navigator.userAgent.toLowerCase();
  if (/iphone|ipad/.test(ua)) return 'ios/ipados';
  if (/mac/.test(ua)) return 'macos';
  if (/windows/.test(ua)) return 'windows';
  if (/android/.test(ua)) return 'android';
}
```

---

## ğŸ“Š æµè§ˆå™¨å…¼å®¹æ€§

| API | Chrome | Safari | Firefox | Edge |
|-----|--------|--------|---------|------|
| Client Hints | 89+ | âŒ | âŒ | 89+ |
| WebAuthn | 67+ | 14+ | 60+ | 18+ |
| Web NFC | 89+ (Android) | âŒ | âŒ | âŒ |
| Web Serial | 89+ | âŒ | âŒ | 89+ |
| WebGL | âœ… | âœ… | âœ… | âœ… |

---

## âš¡ å¿«é€Ÿå¼€å§‹

### 1. åŸºç¡€æ£€æµ‹ï¼ˆ3è¡Œä»£ç ï¼‰
```javascript
const isTouchy = navigator.maxTouchPoints > 0;
const isApple = 'ApplePaySession' in window;
const isAndroid = 'NDEFReader' in window;
```

### 2. ä¸­çº§æ£€æµ‹ï¼ˆWebGLï¼‰
```javascript
const gl = canvas.getContext('webgl');
const dbg = gl.getExtension('WEBGL_debug_renderer_info');
const renderer = gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL);

if (renderer.includes('apple')) return 'Appleè®¾å¤‡';
if (renderer.includes('direct3d')) return 'Windows';
```

### 3. é«˜çº§æ£€æµ‹ï¼ˆPASSKEYï¼‰
```javascript
const hasPasskey = await PublicKeyCredential
  .isUserVerifyingPlatformAuthenticatorAvailable();

if (hasPasskey) {
  // ç»“åˆUAæ¨æ–­å…·ä½“ç³»ç»Ÿ
}
```

---

## ğŸ“ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•
1. **å¤šå±‚æ¬¡æ£€æµ‹**ï¼šåŸºç¡€æ£€æµ‹ + é«˜çº§éªŒè¯
2. **æƒé‡æŠ•ç¥¨**ï¼šç»¼åˆå¤šä¸ªä¿¡å·ï¼Œé¿å…å•ç‚¹ä¾èµ–
3. **ç½®ä¿¡åº¦è¯„ä¼°**ï¼šæä¾›å¯ä¿¡åº¦æŒ‡æ ‡
4. **éšç§ä¿æŠ¤**ï¼šä»…åœ¨å¿…è¦æ—¶è¯·æ±‚é«˜ç†µæ•°æ®
5. **é™çº§å¤„ç†**ï¼šAPIä¸å¯ç”¨æ—¶æœ‰å¤‡é€‰æ–¹æ¡ˆ

### âŒ é¿å…é™·é˜±
1. **ä¸è¦ä»…ä¾èµ–UA**ï¼šææ˜“ä¼ªé€ 
2. **æ³¨æ„éšç§æ¨¡å¼**ï¼šéƒ¨åˆ†APIè¢«ç¦ç”¨
3. **è€ƒè™‘HTTPSè¦æ±‚**ï¼šClient Hintsã€NFCç­‰éœ€è¦å®‰å…¨ä¸Šä¸‹æ–‡
4. **å¤„ç†å¼‚å¸¸æƒ…å†µ**ï¼šè™šæ‹Ÿæœºã€æ¨¡æ‹Ÿå™¨ã€æµè§ˆå™¨æ‰©å±•å¹²æ‰°
5. **éµå®ˆæ³•è§„**ï¼šGDPRã€CCPAç­‰éšç§æ³•è§„

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [å®Œæ•´æŠ€æœ¯æ–‡æ¡£](./è®¾å¤‡æ£€æµ‹æŠ€æœ¯æ€»ç»“.md)
- [é¡¹ç›®æºç ](./public/script.js)
- [æœåŠ¡å™¨ç«¯å®ç°](./server.js)

---

**æ›´æ–°æ—¶é—´**ï¼š2025-11-25  
**é€‚ç”¨èŒƒå›´**ï¼šç°ä»£æµè§ˆå™¨è®¾å¤‡æ£€æµ‹
